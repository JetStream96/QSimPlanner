using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using QSP.TOPerfCalculation.Boeing;
using System.Xml.Linq;

namespace UnitTest.TOPerfCalculation.Boeing
{
    [TestClass]
    public class PerfDataLoaderTest
    {
        public static readonly string perfXml =
            @"<?xml version=""1.0"" encoding=""UTF-8""?>
<TOPerf>
  <Parameters>
    <Aircraft>B777-200LR</Aircraft>
    <Description></Description>
    <Designator>B77L</Designator>
  </Parameters>
  
  <IndividualTable>
    <Flaps>5</Flaps>
    
<WeightUnit>1000KG</WeightUnit>
<!-- 1000KG or 1000LB -->

<LengthUnit>FT</LengthUnit>
<!-- FT or M -->

<Adjustments>
<!-- In KG-->
<!-- performance adjustments for packs off, anti-ice, etc -->
<Packs>
<!-- With engine bleed for packs off, increase field limit weight
by 550 kg and climb limit weight by 1300 kg.
First 550 is for dry rwy, second for wet. -->
<Dry>500</Dry>
<Wet>500</Wet> 
<Climb>1700</Climb>
</Packs>

<AntiIce>
<EngineOnly>
<!-- With engine anti-ice on, decrease field limit weight by 150 kg
and climb limit weight by 200 kg.
First 150 is for dry rwy, second for wet.-->
<Dry>0</Dry>
<Wet>0</Wet>
<Climb>0</Climb>
</EngineOnly>

<EngineAndWing>
<!-- With engine and wing anti-ice on(optional system), decrease
field limit weight by 600 kg and climb limit weight by 1050 kg.
600 is for dry rwy, 550 for wet.-->
<Dry>2050</Dry>
<Wet>2200</Wet>
<Climb>2100</Climb>
</EngineAndWing>

</AntiIce>

</Adjustments>

<Dry>

<SlopeCorrection>-2.0 -1.5 -1.0 -0.5 0.0 0.5 1.0 1.5 2.0
4200 4370 4330 4290 4240 4200 4150 4090 4040 3980
4600 4810 4760 4710 4650 4600 4520 4450 4370 4300
5000 5250 5190 5120 5060 5000 4900 4810 4710 4610
5400 5690 5620 5540 5470 5400 5280 5160 5040 4930
5800 6130 6040 5960 5880 5800 5660 5520 5380 5240
6200 6560 6470 6380 6290 6200 6040 5880 5720 5560
6600 7000 6900 6800 6700 6600 6420 6240 6050 5870
7000 7440 7330 7220 7110 7000 6800 6590 6390 6190
7400 7880 7760 7640 7520 7400 7180 6950 6730 6500
7800 8320 8190 8060 7930 7800 7550 7310 7060 6820
8200 8750 8610 8480 8340 8200 7930 7670 7400 7130
8600 9190 9040 8900 8750 8600 8310 8020 7730 7450
9000 9630 9470 9310 9160 9000 8690 8380 8070 7760
9400 10070 9900 9730 9570 9400 9070 8740 8410 8080
9800 10500 10330 10150 9980 9800 9450 9100 8740 8390
10200 10940 10760 10570 10390 10200 9830 9450 9080 8710
10600 11380 11190 10990 10800 10600 10210 9810 9420 9020
11000 11820 11610 11410 11200 11000 10580 10170 9750 9330
11400 12260 12040 11830 11610 11400 10960 10520 10090 9650
11800 12690 12470 12250 12020 11800 11340 10880 10420 9960
</SlopeCorrection>

<WindCorrection>-15 -10 -5 0 10 20 30 40
4200 3120 3480 3840 4200 4450 4710 4970 5240
4600 3460 3840 4220 4600 4860 5130 5410 5690
5000 3790 4190 4600 5000 5270 5550 5840 6140
5400 4120 4550 4970 5400 5680 5970 6270 6580
5800 4450 4900 5350 5800 6090 6400 6710 7030
6200 4780 5260 5730 6200 6510 6820 7140 7470
6600 5120 5610 6110 6600 6920 7240 7580 7920
7000 5450 5970 6480 7000 7330 7660 8010 8360
7400 5780 6320 6860 7400 7740 8090 8440 8810
7800 6110 6670 7240 7800 8150 8510 8880 9250
8200 6440 7030 7610 8200 8560 8930 9310 9700
8600 6780 7380 7990 8600 8970 9350 9750 10140
9000 7110 7740 8370 9000 9380 9780 10180 10590
9400 7440 8090 8750 9400 9800 10200 10610 11030
9800 7770 8450 9120 9800 10210 10620 11050 11480
10200 8100 8800 9500 10200 10620 11040 11480 11930
10600 8430 9160 9880 10600 11030 11470 11910 12370
11000 8770 9510 10260 11000 11440 11890 12350 12820
11400 9100 9870 10630 11400 11850 12310 12780 13260
11800 9430 10220 11010 11800 12260 12730 13220 13710
</WindCorrection>

<WeightTable>

<Altitude>0</Altitude>
<!-- In feet -->

<Table>-40 14 18 23 26 28 33 37 42 46 50
5550 280.1 252.3 250.7 248.7 247.5 246.8 244.9 239.6 231.9 225.2 218.4
5800 287.3 258.8 257.1 255.1 253.9 253.1 251.2 245.8 237.9 231.1 224.1
6200 297.4 267.9 266.2 264.1 262.9 262.1 260.1 254.5 246.3 239.3 232.1
6600 307.0 276.6 274.9 272.7 271.4 270.6 268.5 262.8 254.3 247.1 239.7
7000 316.4 285.2 283.3 281.1 279.8 279.0 276.8 270.9 262.2 254.8 247.2
7400 326.2 294.2 292.4 290.1 288.8 287.9 285.7 279.6 270.7 263.1 255.3
7800 335.5 302.8 300.9 298.6 297.2 296.3 294.1 287.9 278.8 271.0 263.0
8200 344.3 310.9 309.0 306.6 305.2 304.3 302.0 295.7 286.4 278.4 270.3
8600 352.6 318.6 316.6 314.1 312.7 311.8 309.5 303.0 293.5 285.4 277.0
9000 360.5 325.7 323.7 321.2 319.8 318.8 316.4 309.8 300.1 291.9 283.4
9400 367.7 332.3 330.2 327.7 326.2 325.2 322.8 316.1 306.2 297.8 289.1
9800 374.5 338.5 336.4 333.8 332.3 331.3 328.8 322.0 311.9 303.3 294.5
10200 378.7 344.5 342.3 339.7 338.2 337.2 334.7 327.7 317.5 308.7 299.7
10600 378.7 350.3 348.1 345.4 343.9 342.8 340.3 333.2 322.8 313.9 304.8
11000 378.7 355.9 353.7 351.0 349.4 348.4 345.8 338.6 328.0 319.0 309.7
11400 378.7 361.5 359.2 356.5 354.9 353.8 351.2 343.9 333.1 323.9 314.5
11800 378.7 366.9 364.6 361.8 360.2 359.1 356.4 349.0 338.1 328.8 319.2
12200 378.7 372.0 369.7 366.9 365.2 364.1 361.4 353.9 342.9 333.4 323.7
</Table>

<Climb>351.5 350.9 350.7 350.4 350.2 350.1 349.7 336.8 319.5 305.3 290.6</Climb>
<!-- CLIMB LIMIT WT -->
</WeightTable>

<WeightTable>
<Altitude>2000</Altitude>

<Table>-40 14 18 23 26 28 33 37 42 46 50
5550 262.6 239.1 237.6 235.8 234.7 233.9 228.1 222.6 215.0 208.1 201.0
5800 269.4 245.3 243.7 241.9 240.7 240.0 234.0 228.3 220.6 213.5 206.3
6200 278.9 254.0 252.4 250.4 249.3 248.5 242.3 236.5 228.4 221.1 213.6
6600 287.9 262.2 260.6 258.6 257.4 256.6 250.2 244.2 235.9 228.4 220.7
7000 296.8 270.3 268.7 266.6 265.4 264.5 258.0 251.8 243.3 235.5 227.6
7400 306.1 279.1 277.3 275.2 274.0 273.1 266.4 260.1 251.4 243.4 235.3
7800 315.0 287.3 285.5 283.4 282.1 281.2 274.4 267.9 259.0 250.9 242.5
8200 323.3 295.1 293.3 291.1 289.8 288.9 281.8 275.2 266.1 257.8 249.3
8600 331.2 302.4 300.5 298.3 296.9 296.0 288.9 282.1 272.8 264.4 255.7
9000 338.6 309.2 307.3 305.0 303.7 302.7 295.4 288.5 279.1 270.4 261.6
9400 345.4 315.4 313.5 311.2 309.8 308.9 301.4 294.4 284.7 275.9 266.9
9800 351.9 321.3 319.4 317.0 315.6 314.6 307.0 299.9 290.0 281.1 271.9
10200 358.1 327.0 325.0 322.6 321.2 320.2 312.5 305.2 295.2 286.1 276.7
10600 364.2 332.5 330.5 328.0 326.6 325.6 317.7 310.3 300.1 290.9 281.3
11000 370.1 337.9 335.9 333.3 331.9 330.8 322.9 315.3 305.0 295.6 285.9
11400 375.8 343.2 341.1 338.5 337.0 336.0 327.9 320.2 309.7 300.2 290.3
11800 378.7 348.3 346.2 343.6 342.0 341.0 332.8 325.0 314.4 304.7 294.7
12200 378.7 353.2 351.0 348.4 346.9 345.8 337.5 329.6 318.8 309.0 298.9
</Table>

<Climb>335.7 335.5 335.4 335.2 335.1 334.9 322.6 310.6 294.2 280.3 266.6</Climb>
</WeightTable>

</Dry> 

<Wet>

<SlopeCorrection>-2.0 -1.5 -1.0 -0.5 0.0 0.5 1.0 1.5 2.0
4200 4380 4330 4290 4240 4200 4150 4090 4040 3990
4600 4820 4760 4710 4650 4600 4530 4470 4400 4330
5000 5260 5200 5130 5070 5000 4920 4840 4760 4680
5400 5700 5630 5550 5480 5400 5310 5210 5120 5020
5800 6140 6060 5970 5890 5800 5690 5580 5480 5370
6200 6580 6490 6390 6300 6200 6080 5960 5840 5710
6600 7020 6920 6810 6710 6600 6460 6330 6190 6060
7000 7460 7350 7230 7120 7000 6850 6700 6550 6400
7400 7910 7780 7650 7530 7400 7240 7070 6910 6750
7800 8350 8210 8070 7940 7800 7620 7450 7270 7090
8200 8790 8640 8490 8350 8200 8010 7820 7630 7440
8600 9230 9070 8910 8760 8600 8400 8190 7990 7780
9000 9670 9500 9330 9170 9000 8780 8560 8350 8130
9400 10110 9930 9750 9580 9400 9170 8940 8710 8480
9800 10550 10360 10180 9990 9800 9560 9310 9070 8820
10200 10990 10790 10600 10400 10200 9940 9680 9420 9170
10600 11430 11220 11020 10810 10600 10330 10060 9780 9510
11000 11870 11650 11440 11220 11000 10710 10430 10140 9860
11400 12310 12090 11860 11630 11400 11100 10800 10500 10200
11800 12750 12520 12280 12040 11800 11490 11170 10860 10550
</SlopeCorrection>

<WindCorrection>-15 -10 -5 0 10 20 30 40
4200 3030 3420 3810 4200 4470 4750 5040 5350
4600 3370 3780 4190 4600 4880 5170 5480 5800
5000 3700 4130 4570 5000 5290 5590 5920 6260
5400 4030 4490 4940 5400 5700 6010 6350 6710
5800 4370 4850 5320 5800 6100 6430 6790 7170
6200 4700 5200 5700 6200 6510 6850 7220 7620
6600 5040 5560 6080 6600 6920 7280 7660 8080
7000 5370 5910 6460 7000 7330 7700 8100 8530
7400 5700 6270 6830 7400 7740 8120 8530 8990
7800 6040 6630 7210 7800 8150 8540 8970 9450
8200 6370 6980 7590 8200 8560 8960 9410 9900
8600 6710 7340 7970 8600 8970 9380 9840 10360
9000 7040 7690 8350 9000 9370 9800 10280 10810
9400 7370 8050 8720 9400 9780 10220 10720 11270
9800 7710 8410 9100 9800 10190 10640 11150 11720
10200 8040 8760 9480 10200 10600 11060 11590 12180
10600 8380 9120 9860 10600 11010 11480 12020 12630
11000 8710 9470 10240 11000 11420 11900 12460 13090
11400 9040 9830 10610 11400 11830 12330 12900 13540
11800 9380 10180 10990 11800 12240 12750 13330 14000
</WindCorrection>

<WeightTable>

<Altitude>0</Altitude>
<!-- In feet -->

<Table>-40 14 18 23 26 28 33 37 42 46 50
7340 320.9 286.8 284.8 282.4 281.0 280.1 277.8 271.4 262.0 254.2 246.2
7400 323.4 289.2 287.2 284.8 283.4 282.4 280.1 273.7 264.3 256.4 248.3
7800 333.3 298.1 296.0 293.6 292.1 291.1 288.8 282.2 272.5 264.4 256.1
8200 342.6 306.4 304.3 301.8 300.2 299.3 296.8 290.0 280.1 271.8 263.2
8600 351.3 314.1 312.0 309.4 307.8 306.8 304.3 297.3 287.1 278.6 269.8
9000 359.3 321.2 319.0 316.4 314.8 313.7 311.2 304.0 293.6 284.8 275.8
9400 366.9 327.8 325.6 322.8 321.2 320.1 317.5 310.2 299.5 290.5 281.3
9800 374.3 334.3 332.0 329.2 327.5 326.4 323.7 316.2 305.2 296.0 286.6
10200 378.7 340.8 338.4 335.5 333.8 332.7 330.0 322.3 311.0 301.6 291.9
10600 378.7 347.2 344.8 341.9 340.1 339.0 336.2 328.3 316.8 307.1 297.2
11000 378.7 353.6 351.1 348.1 346.3 345.1 342.3 334.2 322.4 312.5 302.4
11400 378.7 359.8 357.2 354.2 352.4 351.2 348.2 340.0 328.0 317.9 307.5
11800 378.7 365.8 363.3 360.1 358.3 357.0 354.0 345.7 333.4 323.1 312.6
12200 378.7 371.7 369.1 365.9 364.0 362.7 359.7 351.2 338.7 328.2 317.5
12600 378.7 377.4 374.7 371.5 369.6 368.3 365.2 356.5 343.9 333.2 322.3
13000 378.7 378.7 378.7 377.0 375.0 373.8 370.6 361.8 348.9 338.2 327.1
13400 378.7 378.7 378.7 378.7 378.7 378.7 375.9 367.0 354.0 343.0 331.8
13800 378.7 378.7 378.7 378.7 378.7 378.7 378.7 372.1 358.9 347.8 336.4
</Table>

<Climb>351.5 350.9 350.7 350.4 350.2 350.1 349.7 336.8 319.5 305.3 290.6</Climb>
<!-- CLIMB LIMIT WT -->
</WeightTable>

<WeightTable>
<Altitude>2000</Altitude>

<Table>-40 14 18 23 26 28 33 37 42 46 50
7340 299.2 270.7 268.8 266.6 265.3 264.4 257.4 250.8 241.8 234.3 226.8
7400 301.6 273.0 271.1 268.9 267.6 266.7 259.6 253.0 244.0 236.4 228.9
7800 310.9 281.4 279.5 277.2 275.9 274.9 267.7 260.8 251.6 243.8 236.1
8200 319.5 289.2 287.3 285.0 283.6 282.6 275.1 268.1 258.6 250.6 242.7
8600 327.6 296.5 294.5 292.1 290.7 289.7 282.0 274.8 265.1 256.9 248.7
9000 335.1 303.2 301.2 298.7 297.2 296.2 288.4 281.0 271.0 262.6 254.2
9400 342.0 309.3 307.3 304.7 303.2 302.2 294.1 286.5 276.3 267.7 259.1
9800 348.8 315.3 313.2 310.6 309.1 308.0 299.7 292.0 281.5 272.6 263.8
10200 355.7 321.4 319.2 316.5 314.9 313.9 305.4 297.4 286.7 277.6 268.6
10600 362.5 327.4 325.1 322.4 320.8 319.7 311.0 302.9 291.9 282.6 273.4
11000 369.2 333.3 331.0 328.2 326.5 325.4 316.5 308.2 297.0 287.5 278.1
11400 375.7 339.0 336.7 333.9 332.2 331.0 322.0 313.5 302.0 292.3 282.7
11800 378.7 344.7 342.3 339.4 337.7 336.5 327.3 318.6 306.9 297.1 287.2
12200 378.7 350.2 347.8 344.8 343.1 341.9 332.5 323.6 311.7 301.7 291.7
12600 378.7 355.5 353.1 350.1 348.3 347.1 337.5 328.6 316.5 306.3 296.1
13000 378.7 360.8 358.3 355.2 353.4 352.2 342.5 333.4 321.1 310.8 300.5
13400 378.7 366.0 363.5 360.4 358.5 357.3 347.4 338.2 325.7 315.2 304.8
13800 378.7 371.1 368.5 365.4 363.5 362.3 352.3 342.9 330.3 319.6 309.0
</Table>

<Climb>335.7 335.5 335.4 335.2 335.1 334.9 322.6 310.6 294.2 280.3 266.6</Climb>
</WeightTable>

</Wet>
 <Derates>
   <FullThrustName>TO</FullThrustName>
   
<TO1>160 180 200 220 240 260 280 300 320 340 360
151.5 170.2 188.9 207.6 226.3 245.0 263.7 282.4 301.1 319.8 338.5
152.2 170.5 188.9 207.2 225.6 243.9 262.3 280.6 299.0 317.3 335.6
145.1 162.5 180.0 197.4 214.8 232.3 249.7 267.1 284.5 302.0 319.4
147.0 164.5 182.0 199.5 217.0 234.4 251.9 269.4 286.9 304.4 321.9
160.0 180.0 200.0 220.0 240.0 260.0 280.0 300.0 320.0 340.0 360.0
160.0 180.0 200.0 220.0 240.0 260.0 280.0 300.0 314.7 334.6 354.6
</TO1>

<TO2>160 180 200 220 240 260 280 300 320 340 360
142.6 159.8 177.0 194.2 211.4 228.6 245.8 263.0 280.2 297.5 314.7
144.3 161.4 178.4 195.5 212.5 229.6 246.6 263.7 280.7 297.8 314.8
128.5 144.1 159.7 175.3 191.0 206.6 222.2 237.8 253.5 269.1 284.7
134.0 149.5 165.0 180.5 196.0 211.5 227.0 242.5 258.0 273.5 289.0
160.0 180.0 200.0 220.0 240.0 260.0 280.0 300.0 320.0 340.0 360.0
160.0 180.0 200.0 220.0 240.0 260.0 280.0 300.0 320.0 340.0 360.0
</TO2> 
   </Derates>
</IndividualTable>
 
</TOPerf>";

        [TestMethod]
        public void ReadTableTest()
        {
            var table = new PerfDataLoader().ReadTable(
                 XDocument.Parse(perfXml).Root);


        }
    }
}
