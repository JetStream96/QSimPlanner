using NUnit.Framework;
using QSP.RouteFinding.Tracks.Pacots.Eastbound;

namespace UnitTest.RouteFinding.Tracks.Pacots.Eastbound
{
    [TestFixture]
    public class SplitterTest
    {
        [Test]
        public void SplitTest()
        {
            var text = @" EASTBOUND TRACKS  ...
   TRACK 1.
    FLEX ROUTE : KALNA 42N160E 45N170E 47N180E 49N170W 50N160W 51N150W
                 51N140W ORNAI
   JAPAN ROUTE : ONION OTR5 KALNA
     NAR ROUTE : ACFT LDG KSEA--ORNAI SIMLU KEPKO TOU MARNR KSEA
                 ACFT LDG KPDX--ORNAI SIMLU KEPKO TOU KEIKO KPDX
                 ACFT LDG CYVR--ORNAI SIMLU KEPKO YAZ FOCHE CYVR
           RMK : ACFT LDG OTHER DEST--ORNAI SIMLU KEPKO UPR TO DEST
   TRACK 2.
    FLEX ROUTE : EMRON 38N160E 38N170E 38N180E 38N170W 38N160W 39N150W
                 40N140W 40N130W SHENU
   JAPAN ROUTE : ONION OTR5 ADNAP OTR7 EMRON
     NAR ROUTE : ACFT LDG KSFO--SHENU AMAKR BGGLO KSFO
                 ACFT LDG KLAX--SHENU ENI AVE FIM KLAX
   TRACK 3.
    FLEX ROUTE : LEPKI 37N160E 37N170E 36N180E 36N170W 36N160W 37N150W
                 38N140W 39N130W DACEM
   JAPAN ROUTE : AVBET OTR11 LEPKI
     NAR ROUTE : ACFT LDG KLAX--DACEM PAINT PIRAT AVE FIM KLAX
                 ACFT LDG KSFO--DACEM PAINT PIRAT OSI KSFO
           RMK : ATM CENTER TEL:81-92-608-8870. 06 FEB 07:00 2016 UNTIL 06 FEB
   21:00 2016. CREATED: 05 FEB 18:49 2016";

            var splitter = new Splitter(text);

            var msgs = splitter.Split();

            Assert.AreEqual(3, msgs.Count);

            Assert.IsTrue(msgs[0] == @"TRACK 1.
    FLEX ROUTE : KALNA 42N160E 45N170E 47N180E 49N170W 50N160W 51N150W
                 51N140W ORNAI
   JAPAN ROUTE : ONION OTR5 KALNA
     NAR ROUTE : ACFT LDG KSEA--ORNAI SIMLU KEPKO TOU MARNR KSEA
                 ACFT LDG KPDX--ORNAI SIMLU KEPKO TOU KEIKO KPDX
                 ACFT LDG CYVR--ORNAI SIMLU KEPKO YAZ FOCHE CYVR
           RMK : ACFT LDG OTHER DEST--ORNAI SIMLU KEPKO UPR TO DEST
   ");

            Assert.IsTrue(msgs[1] == @"TRACK 2.
    FLEX ROUTE : EMRON 38N160E 38N170E 38N180E 38N170W 38N160W 39N150W
                 40N140W 40N130W SHENU
   JAPAN ROUTE : ONION OTR5 ADNAP OTR7 EMRON
     NAR ROUTE : ACFT LDG KSFO--SHENU AMAKR BGGLO KSFO
                 ACFT LDG KLAX--SHENU ENI AVE FIM KLAX
   ");

            Assert.IsTrue(msgs[2] == @"TRACK 3.
    FLEX ROUTE : LEPKI 37N160E 37N170E 36N180E 36N170W 36N160W 37N150W
                 38N140W 39N130W DACEM
   JAPAN ROUTE : AVBET OTR11 LEPKI
     NAR ROUTE : ACFT LDG KLAX--DACEM PAINT PIRAT AVE FIM KLAX
                 ACFT LDG KSFO--DACEM PAINT PIRAT OSI KSFO
           RMK : ATM CENTER TEL:81-92-608-8870. 06 FEB 07:00 2016 UNTIL 06 FEB
   21:00 2016. CREATED: 05 FEB 18:49 2016");

        }
    }
}
